{% load i18n %}
{% load thumbnail %}
{% if series_list %}
  {% for serie in series_list %}
    <div class="grid_2" style="margin-bottom:2em; margin-right:1em;">
        <a class="portfolio_item float alpha" href="{{ serie.get_absolute_url }}">
            <div class="preload" style="width:140px; height:200px">
            {% spaceless %}
                {% if serie.poster.src %}
                    {% thumbnail serie.poster.src "150x200" as img_serie %}
                        <img class="prel serie" id="{{ serie.id }}" src="{{ img_serie.url }}" />
                    {% endthumbnail %}
                {% else %}
                <img class="prel serie" id="{{ serie.id }}" src="/static/images/image_not_available.png" height="300" width="200" /> 
                {% endif %}
            {% endspaceless %}
            </div>
            </a>
    </div>
  {% endfor %}
{% else %} 
<h2 class="grid_12 caption clearfix">No hay series de este tipo todavia</h2>
{% endif %}
{% block extrascript %}
<script type="text/javascript">
  $('.serie').CreateBubblePopup({
    position: 'right',
    align: 'center',
    width: '350',
    innerHtml: '<img src="/static/images/ajax-loading.gif" style="border:0px; vertical-align:middle; margin-right:10px; display:inline;" />',
    innerHtmlStyle: { color:'#fff', 'text-align':'left' },
    themeName: 'all-black',
    themePath: '/static/images/jquerybubblepopup-theme'
  });
  $('.serie').mouseover(function(){
    // Obtenemos el id de la serie y lo buscamos
    var serie = $(this);
    var serie_id = serie.attr('id');
    $.get('/series/lookup/serie/' + serie_id + '/', function(data) {
      serie.SetBubblePopupInnerHtml(data);
    }); 
  });
</script>
{% endblock %}
