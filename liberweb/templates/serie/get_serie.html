{% extends "base.html" %}
{% load i18n %}
{% load thumbnail %}
{% load comments %}
{% load extract_domain %}
{% block extrastyle %}   
    <link rel="stylesheet" href="/static/css/jquery.rating.css" type="text/css" />{% endblock %}
{% block extrahead %}
    <script type="text/javascript" src="/static/js/jquery.MetaData.js"></script>
    <script type="text/javascript" src="/static/js/jquery.rating.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $(".redhearthover").hover(function() {
       $(this).attr('src', '/static/images/heart_black.png');
}, function(){
       $(this).attr('src', '/static/images/heart_red.png');
    });
    $(".blackhearthover").hover(function() {
       $(this).attr('src', '/static/images/heart_red.png');
}, function(){
       $(this).attr('src', '/static/images/heart_black.png');
    });
}); 
</script>{% endblock %}
{% block contents %}

		<!-- Column 1 / Project Information -->
		<div class="grid_4">
		<h4 class="title">{{serie.name}}
    {% if favorite == "no" %}
  <form class="favorite" id="favorite" action="." method="POST">
    <input type="hidden" name="favorite" value="favorite"/>
    <input type="image" class="blackhearthover" src="/static/images/heart_black.png">
  </form>
  {% else %} {% if favorite == "yes" %}
  <form class="favorite" id="favorite" action="." method="POST">
    <input type="hidden" name="no-favorite" value="no-favorite"/>
    <input type="image" class="redhearthover" src="/static/images/heart_red.png">
  </form>
    {% endif %}
    {% endif %}

  <div id="rating">
    <form action="." method="POST">
      <input type="radio" name="user_rating" value="1" class="star" {% if score == 1 %}checked="checked"{% endif %}/>
      <input type="radio" name="user_rating" value="2" class="star" {% if score == 2 %}checked="checked"{% endif %}/>
      <input type="radio" name="user_rating" value="3" class="star" {% if score == 3 %}checked="checked"{% endif %}/>
      <input type="radio" name="user_rating" value="4" class="star" {% if score == 4 %}checked="checked"{% endif %}/>
      <input type="radio" name="user_rating" value="5" class="star" {% if score == 5 %}checked="checked"{% endif %}/>
      <button type="submit">Rate</button>
    </form>{% spaceless %}
    {% if message == "No registrado" %}
      <div id="message_box" style="font-size:small;"><img id="close_message" style="float:right;cursor:pointer"  src="/static/img/close.png" />Debe <a href="/accounts/login/?next={{request.path}}">registrarse o iniciar sesion</a> para votar</div>
    {% else %}{% if message == "Vote recorded" %}
      <div id="message_box" style="font-size:small;"><img id="close_message" style="float:right;cursor:pointer"  src="/static/img/close.png" />Voto registrado</div>
    {% else %}{% if message == "You have already voted" %}
      <div id="message_box" style="font-size:small;"><img id="close_message" style="float:right;cursor:pointer"  src="/static/img/close.png" />Ya ha votado</div>
    {% else %}{% if message %}
      <div id="message_box" style="font-size:small;"><img id="close_message" style="float:right;cursor:pointer"  src="/static/img/close.png" />{{ message }}</div>
    {% endif %}
    {% endif %}
    {% endif %}
    {% endif %}
    {% if error %}
      <div class="error"> Couldn't vote :( </div>
    {% endif %}
  </div>{% endspaceless %}
</h4>
		<div class="hr dotted clearfix">&nbsp;</div>

  {% if serie.network.name %}
 <p> <b>{% trans "Network" %}:</b> <a href="{{ serie.network.get_absolute_url }}">{{ serie.network.name }}</a></p>
  {% endif %}
 <p><b>{% trans "Genre" %}:</b> 
      {% for genre in serie.genres.all %}
      <a href="{{ genre.get_absolute_url}}">{{ genre.name }}</a>
      {% endfor %}</p>
<p><b>{% trans "Runtime" %}:</b> {{ serie.runtime }} {% trans "minutes" %}</p>
<p><b>{% trans "Description" %}:</b> {{ serie.description }}</p>

			<p class="clearfix">
				<a href="/series" class="button float">&lt;&lt; Back to Series</a>
</p> <p>
{% get_comment_count for serie as comment_count %}
				<a href="#contact_form" class="button float">{{comment_count}} Comments</a>
			</p>
		</div>

  {% if image %}{% thumbnail image "400x300" as img_serie %}
      <img id="poster" src="{{ img_serie.url }}" />{% endthumbnail %}
  {% else %}<div class="image_not_found">  <img src="/static/images/image_not_available.png" height=100> </div>
  {% endif %}
		
			<div class="grid_14">
		<h2><span>{% trans "Seasons" %}</span></h2>{% for season in season_list %}
				<a class="portfolio_item float alpha" href="{% url get_season serie_slug=serie.slug_name season=season.season %}">
					<span>{% trans "Season" %} {{ season }}</span> 
					{% if season.images.all.0 %} {% thumbnail season.images.all.0.src "80x60" as img_season %} 
						<img src="{{ img_season.url }}" alt=""/>{% endthumbnail %}
					{% else %}<div class="image_not_found">
					     <img src="/static/images/image_not_available.png" width=150></div>
                                        {% endif %}

				</a>{% endfor %}
			</div>

		
		<div class="hr grid_12 clearfix">&nbsp;</div>
		<!-- Client pickup line -->
		<h2 class="grid_12 caption" style="text-align:center;"><span>{% trans "Actors" %}</span></h2>
			<div class="hr dotted clearfix">&nbsp;</div>
			<div class="grid_15">{% for actor in serie.actors.all %}
				<a class="portfolio_item float alpha" href="{{ actor.get_absolute_url }}">
					<span>{{ actor.name }} as {{actor.role_set.all.0.role}}</span>
				       {% if actor.images.get %}{% thumbnail actor.images.get.src "280x280" as img_actor %}
					   <img id="actor_list" src="{{ img_actor.url }}" />{% endthumbnail %}
					   {% else %}<img id="actor_unknown" width="180" src="/static/images/image_not_available.png">
				       {% endif %}
				</a>
			{% endfor %}
			</div>


{% render_comment_list for serie %}

{% with request.path as next %}
{% render_comment_form for serie %}
{% endwith %}

{% endblock %}
