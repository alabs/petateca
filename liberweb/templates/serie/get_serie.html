{% extends "base.html" %}
{% load i18n %}
{% load thumbnail %}
{% block extrastyle %}
  <link href='http://jquery-star-rating-plugin.googlecode.com/svn/trunk/jquery.rating.css' type="text/css" rel="stylesheet"/>
{% endblock %}
{% block extrahead %}
  <script src='http://jquery-star-rating-plugin.googlecode.com/svn/trunk/jquery.MetaData.js' type="text/javascript" language="javascript"></script>
  <script src='http://jquery-star-rating-plugin.googlecode.com/svn/trunk/jquery.rating.js' type="text/javascript" language="javascript"></script>
{% endblock %}
{% block contents %}
<div class="titulo_serie">{{ serie.name }}
<br />
  <div id="rating">
    <form action="." method="POST">
      <input type="radio" name="user_rating" value="1" class="star" />
      <input type="radio" name="user_rating" value="2" class="star" />
      <input type="radio" name="user_rating" value="3" class="star" />
      <input type="radio" name="user_rating" value="4" class="star" />
      <input type="radio" name="user_rating" value="5" class="star" />
      <button type="submit">Rate</button>
    </form>
    {% if message %}
      <div class="message">{{ message }}</div>
    {% endif %}
    
    {% if error %}
      <div class="error"> Couldn't vote :( </div>
    {% endif %}
  </div>
  <br>
  {% if image %}
    {% thumbnail image "400x300" as img_serie %}
      <img id="poster" src="{{ img_serie.url }}" />
    {% endthumbnail %}
  {% else %}
  <div class="image_not_found"> Esta serie no tiene imagen de portada </div>
  {% endif %}
</div>

<br />
{# serie.rating_user_votes #}
{# serie.rating_user.get_percent #}

<ul>
    <li>{% trans "Network" %}: {{ serie.network.name }}</li>
  <li>
  {% trans "Genre" %}:
    <ul>
      {% for genre in serie.genres.all %}
        <li>{{ genre.name }}</li>
      {% endfor %}
    </ul>
  </li>
  <li>
  {% trans "Actors" %}:
    <ul>
      {% for actor in serie.actors.all %}
        <li>{{ actor.name }}</li>
      {% endfor %}
    </ul>
  </li>
  <li>{% trans "Runtime" %}: {{ serie.runtime }} {% trans "minutes" %}</li>
  <li>{% trans "Description" %}: {{ serie.description }}</li>
</ul>

{% regroup episode_list by season as episode_list %}

<ul>
  <li> 
    {% trans "Episodes" %}: 
    <ul> 
      {% for episode in episode_list %} 
      <br/> 
        <li>{% trans "Season" %} {{ episode.grouper }} 
        <ul> 
         <table> 
          <tr> 
           <th colspan="10"> Season  <th> 
           <th colspan="10"> Episode  <th> 
           <th colspan="30"> Name <th>                                     
          </tr> 
          {% for episode in episode.list %} 
           <tr> 
             <td colspan="10"> {{ episode.season }} </td> 
             <td colspan="10"> {{ episode.episode }} </td> 
             <td colspan="30"><a href="{% url liberweb.serie.views.get_episode serie_slug=serie.slug_name season=episode.season episode=episode.episode %}">{{ episode.title }}</a></td> 
           </tr>
          {% endfor %}
        </ul>
        </li>
      {% endfor %}
    </ul>
  </li>
</ul>

<br />
<a href="{% url serie-index %}">{% trans "Series list" %}</a>
<br /> 
</a>
{% endblock %}
